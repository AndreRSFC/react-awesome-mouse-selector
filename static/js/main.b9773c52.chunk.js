(this["webpackJsonpreact-awesome-mouse-selector-example"]=this["webpackJsonpreact-awesome-mouse-selector-example"]||[]).push([[0],{10:function(e,t,o){"use strict";o.r(t);o(2);var n=o(0),i=o.n(n),s=o(4),r=o.n(s),l=o(1);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function c(e){var t={top:0,left:0};if(e.offset)t=a({},e.offset);else if(e.target){var o=e.target.getBoundingClientRect();t.top=o.top+window.scrollY,t.left=o.left+window.scrollX}return t}var h=function(e){var t,o;function n(t){var o;return(o=e.call(this,t)||this).bind=function(){o.props.target.addEventListener("mousedown",o.onMouseDown),o.props.target.addEventListener("touchstart",o.onTouchStart)},o.reset=function(){o.props.target&&o.props.target.removeEventListener("mousedown",o.onMouseDown)},o.init=function(e,t,n){if(o.props.ignoreTargets){var i=e.target;if(!i.matches){i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector||function(e){return-1!==[].indexOf.call(window.document.querySelectorAll(e),function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o))}}if(i.matches&&i.matches(o.props.ignoreTargets.join(",")))return!1}var s={mouseDown:!0,startPoint:{x:(t-o.state.offset.left)/o.state.zoom,y:(n-o.state.offset.top)/o.state.zoom}};return o.setState(s),!0},o.onMouseDown=function(e){o.props.disabled||2===e.button||e.nativeEvent&&2===e.nativeEvent.which||o.init(e,e.pageX,e.pageY)&&(window.document.addEventListener("mousemove",o.onMouseMove),window.document.addEventListener("mouseup",o.onMouseUp))},o.onTouchStart=function(e){o.props.disabled||!e.touches||!e.touches[0]||e.touches.length>1||o.init(e,e.touches[0].pageX,e.touches[0].pageY)&&(window.document.addEventListener("touchmove",o.onTouchMove),window.document.addEventListener("touchend",o.onMouseUp))},o.onMouseUp=function(){window.document.removeEventListener("touchmove",o.onTouchMove),window.document.removeEventListener("mousemove",o.onMouseMove),window.document.removeEventListener("mouseup",o.onMouseUp),window.document.removeEventListener("touchend",o.onMouseUp),!o.props.blockSelection&&o.setState({mouseDown:!1,startPoint:null,endPoint:null,selectionBox:null}),o.props.onSelectionChange&&o.props.onSelectionChange(o.selectedChildren),o.props.onHighlightChange&&(o.highlightedChildren=[],o.props.onHighlightChange(o.highlightedChildren)),o.selectedChildren=[]},o.onMouseMove=function(e){if(e.preventDefault(),o.state.mouseDown){var t={x:(e.pageX-o.state.offset.left)/o.state.zoom,y:(e.pageY-o.state.offset.top)/o.state.zoom};o.setState({endPoint:t,selectionBox:o.state.startPoint&&o.calculateSelectionBox(o.state.startPoint,t)})}},o.onTouchMove=function(e){if(e.preventDefault(),o.state.mouseDown){var t={x:(e.touches[0].pageX-o.state.offset.left)/o.state.zoom,y:(e.touches[0].pageY-o.state.offset.top)/o.state.zoom};o.setState({endPoint:t,selectionBox:o.state.startPoint&&o.calculateSelectionBox(o.state.startPoint,t)})}},o.lineIntersects=function(e,t){return e[1]>=t[0]&&t[1]>=e[0]},o.boxIntersects=function(e,t){var n={x:[e.left,e.left+e.width],y:[e.top,e.top+e.height]},i={x:[t.left,t.left+t.width],y:[t.top,t.top+t.height]};return o.lineIntersects(n.x,i.x)&&o.lineIntersects(n.y,i.y)},o.updateCollidingChildren=function(e){if(o.selectedChildren=[],o.props.elements&&o.props.elements.forEach((function(t,n){if(t){var i=t.getBoundingClientRect(),s={top:(i.top-o.state.offset.top+window.scrollY)/o.state.zoom,left:(i.left-o.state.offset.left+window.scrollX)/o.state.zoom,width:t.clientWidth,height:t.clientHeight};o.boxIntersects(e,s)&&o.selectedChildren.push(n)}})),o.props.onHighlightChange&&JSON.stringify(o.highlightedChildren)!==JSON.stringify(o.selectedChildren)){var t=o.props.onHighlightChange;o.highlightedChildren=[].concat(o.selectedChildren),window.requestAnimationFrame?window.requestAnimationFrame((function(){t(o.highlightedChildren)})):t(o.highlightedChildren)}},o.calculateSelectionBox=function(e,t){if(!o.state.mouseDown||!e||!t)return null;var n=Math.floor(e.x/o.props.cellSize.width),i=Math.floor(t.x/o.props.cellSize.width),s=Math.floor(e.y/o.props.cellSize.height),r=Math.floor(t.y/o.props.cellSize.height),l=Math.abs((n+1)*o.props.cellSize.width-i*o.props.cellSize.width)-2,a=Math.abs(n*o.props.cellSize.width-(i+1)*o.props.cellSize.width)-2,c=Math.abs((s+1)*o.props.cellSize.height-r*o.props.cellSize.height)-2,h=Math.abs(s*o.props.cellSize.height-(r+1)*o.props.cellSize.height)-2,p=Math.min(n*o.props.cellSize.width,i*o.props.cellSize.width),u=Math.min(s*o.props.cellSize.height,r*o.props.cellSize.height),d=Math.max(n*o.props.cellSize.width,i*o.props.cellSize.width),f=Math.max(s*o.props.cellSize.height,r*o.props.cellSize.height);if(u>=0&&p>=0&&f<=o.props.selectionSize.maxHeight&&d<=o.props.selectionSize.maxWidth){var m=n*o.props.cellSize.width>i*o.props.cellSize.width?l:a,g=s*o.props.cellSize.height>r*o.props.cellSize.height?c:h;return 0===o.props.blockedPoints.filter((function(e){return u===e.top&&p===e.left||u+g-o.props.cellSize.height+2===e.top&&p+m-o.props.cellSize.width+2===e.left})).length?{left:p,top:u,width:m,height:g}:o.state.selectionBox}return o.state.selectionBox},o.state={mouseDown:!1,startPoint:null,endPoint:null,selectionBox:null,offset:c(t),zoom:t.zoom||1},o.selectedChildren=[],o.highlightedChildren=[],o}o=e,(t=n).prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o,n.getDerivedStateFromProps=function(e){return{offset:c(e)}};var s=n.prototype;return s.componentDidMount=function(){this.reset(),this.bind()},s.componentDidUpdate=function(e){this.reset(),this.bind(),this.state.mouseDown&&this.state.selectionBox&&this.updateCollidingChildren(this.state.selectionBox),e.blockSelection!==this.props.blockSelection&&!this.props.blockSelection&&this.setState({mouseDown:!1,startPoint:null,endPoint:null,selectionBox:null})},s.componentWillUnmount=function(){this.reset(),window.document.removeEventListener("mousemove",this.onMouseMove),window.document.removeEventListener("mouseup",this.onMouseUp)},s.render=function(){var e;return this.state.selectionBox&&(e=this.state.selectionBox),this.state.mouseDown&&this.state.endPoint&&this.state.startPoint?i.a.createElement("div",Object.assign({className:"react-ds-border "+this.props.style,style:e},this.state.selectionBox&&this.state.selectionBox.width+2>=this.props.cellSize.width&&this.state.selectionBox.width+2>=this.props.cellSize.width?{"data-content":this.props.dataContent}:{})):null},n}(i.a.PureComponent),p=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),o=t[0],s=t[1],r=Object(n.useState)(),a=Object(l.a)(r,2),c=a[0],p=a[1],u=function(e){if(!o.includes(e)){var t=o;t.push(e),s(t)}};return i.a.createElement("div",{ref:function(e){e&&p(e)},style:{display:"flex",maxWidth:"423px",flexWrap:"wrap"}},Array(9).fill(null).map((function(e,t){return i.a.createElement("div",{ref:u,style:{minWidth:"141px",minHeight:"98px",boxSizing:"border-box",border:"1px solid  black",backgroundColor:"red"}},t)})),c&&o?i.a.createElement(h,{target:c,elements:o,onSelectionChange:function(e){return console.log(e)},onHighlightChange:function(e){return console.log(e)},style:"block",dataContent:"",blockSelection:!1,cellSize:{width:141,height:98},selectionSize:{maxWidth:422,maxHeight:293},blockedPoints:[]}):null)};r.a.render(i.a.createElement(p,null),document.getElementById("root"))},2:function(e,t,o){},5:function(e,t,o){e.exports=o(10)}},[[5,1,2]]]);
//# sourceMappingURL=main.b9773c52.chunk.js.map